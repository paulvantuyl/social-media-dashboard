<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Social Media Dashboard App</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>

  <body>
    <header>
      <button
        id="registerBtn"
        class="button-link"
        style="display: none"
        onclick="window.location.href='/register'"
      >
        Register
      </button>
      <button
        id="loginBtn"
        class="button-link"
        style="display: none"
        onclick="window.location.href='/login'"
      >
        Login
      </button>
      <button
        id="logoutBtn"
        class="button-link"
        style="display: none"
        onclick="logout()"
      >
        Logout
      </button>
    </header>

    <h1>Welcome to the Social Media Dashboard App!</h1>
    <p id="welcomeMessage">
      Explore and manage your social media accounts in one place.
    </p>

    <div class="app-names">
      <div>FaceSnap</div>
      <div>InstaBook</div>
      <div>TweetChat</div>
    </div>

    <button
      id="createPostBtn"
      class="button-link"
      style="display-none"
      onclick="redirectToPostCreation()"
    >
      Create Post
    </button>

    <script>
      function getUsernameFromURL() {
        return new URLSearchParams(window.location.search).get('username');
      }

      function handleAuthentication() {
        const username = getUsernameFromURL();
        const registerBtn = document.getElementById('registerBtn');
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const createPostBtn = document.getElementById('createPostBtn');

        if (username) {
          registerBtn.style.display = loginBtn.style.display = 'none';
          logoutBtn.style.display = createPostBtn.style.diplay = 'inline-block';
          welcomeMessage.innerText = `Welcome, ${username}!`;
        } else {
          registerBtn.style.display = loginBtn.style.display = 'inline-block';
          logoutBtn.style.display = createPostBtn.style.display = 'none';
        }
      }

      function logout() {
        window.location.href = '/logout';
      }

      function redirectToPostCreation() {
        window.location.href = '/post';
      }

      window.onload = function () {
        getUsernameFromURL();
        handleAuthentication();
      };
    </script>
  </body>
</html>
